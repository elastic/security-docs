[chapter]
[[upgrade-intro]]


= Upgrade {elastic-sec}

We highly recommend that all {elastic-sec} users keep their deployments up to date with the latest available {stack} version to access new features, security updates, and performance enhancements.

For upgrading to the latest {stack} version, we recommend using the {kibana-ref}/upgrade-assistant.html[Kibana Upgrade Assistant].


[discrete]
[[pre-upgrade-security]]
== Pre-upgrade requirements for 8.0

Before you upgrade, review the following requirements specific to {elastic-sec}:

*Upgrade agents*

Upgrade your {stack} and {agent}s to 7.17 first (refer to {fleet-guide}/upgrade-elastic-agent.html[Upgrade Fleet-managed Elastic Agents]). After this is complete, you can then {stack-ref}/upgrading-elastic-stack.html[upgrade the {stack}] to 8.0. Initially, {agent}s will be version 7.17; this is fine because {elastic-sec} supports the last minor in 7.x (7.17) and any subsequent {elastic-endpoint} versions in 8.x. After the {stack} upgrade, you can decide whether to upgrade {agent}s to 8.0.0, which is recommended to ensure you get the latest features and improvements.

NOTE: You do not need to shut down your {agent}s or endpoints to upgrade the {stack}.

*Disable all rules*

Manually disable your rules before upgrading, then reactivate them after the process completes. If this is not done, rules are automatically disabled during the upgrade process, which can cause a gap in rule coverage.

To disable all rules:

. Go to *Detect* -> *Rules*.
. Click the *Select All Rules* button above the All rules table.
. Click *Bulk actions* -> *Deactivate selected*.

To reactivate all detection rules:

. Go to *Detect* -> *Rules*.
. Click the *Select All Rules* button above the All rules table.
. Click *Bulk actions* -> *Activate selected*.

NOTE: To use the {elastic-sec} API to re-enable rules, refer to <<bulk-actions-rules-api>>.

*New Full Disk Access approval needed for {elastic-endpoint}*

When you manually install {elastic-endpoint}, you must approve a system extension, kernel extension, and enable Full Disk Access (FDA). There is a new FDA requirement in 8.0.0. Refer to <<deploy-elastic-endpoint>> to review these required permissions.

* Rules must be manually disabled before upgrading to {stack} version 8.0.0, and then manually enabled after the process completes to avoid gaps in rule coverage. Refer to <<upgrade-intro, Upgrade {elastic-sec}>> for more information.
* To make the *Data view* option appear in an environment with legacy alerts, a user with elevated role privileges must visit the {es-sec-app}, open a page that displays alert data (such as the Overview page), then refresh the page. The user's role privileges must allow them to enable the detections feature in a Kibana space. Refer to <<enable-detections-ui, Enable and access detections>> for more information.

+
NOTE: If new alerts are generated in an upgraded environment without legacy alerts, refreshing any page with alert data in {elastic-sec} will make the *Data view* option appear in the {es-sec-ui}.
