[[cases-ui-integrations]]
[role="xpack"]
== Configure external connections

You can push {es-sec} cases to these third-party systems:

* {sn-itsm}
* {sn-sir}
* {jira} (including Jira Service Desk)
* {ibm-r}
* {swimlane}

To push cases, you need to create a connector, which stores the information required to interact with an external system. After you have created a connector, you can set {es-sec} cases to automatically close when they are sent to external systems.

IMPORTANT: To create connectors and send cases to external systems, you need the
https://www.elastic.co/subscriptions[appropriate license], and your role needs *All* privileges for the *Action and Connectors* feature. For more information, refer to <<case-permissions>>.

[float]
[[create-new-connector]]
=== Create a new connector

. Go to *Investigate* -> *Cases* -> *Edit external connection*.
+
[role="screenshot"]
image::images/cases-ui-connector.png[Shows the page for creating connectors]
. From the *Incident management system* list, select *Add new connector*.
. Select the system to send cases to: *{sn}*, *{jira}*, *{ibm-r}*, or *{swimlane}*.

. Enter a name for the connector, provide the required settings, and then save it.
+

** For {jira} connectors:
+
TIP: To learn how to connect {elastic-sec} to {jira}, check out the <<connect-security-to-jira, tutorial>> at the end of this topic.
+
|===

| *URL* | The URL of the external system to which you want to send cases.

| *Project key* | The key of the {jira} project to which you are sending cases.

| *Email address* | The {jira} account username or email.

| *API token* | The API token or password is used to authenticate {jira} updates.

|===

** For {ibm-r} connectors:
+
|===

| *URL* | The URL of the external system to which you want to send cases.

| *Organization ID* | Your organization’s {ibm-r} ID number.

| *API key ID* | The API key is used to authenticate {ibm-r} updates.

| *API key secret* | The API key secret is used to authenticate {ibm-r} updates.

|===

** For {sn} connectors:
+
IMPORTANT: If you've upgraded from {stack} version 7.15.0 or earlier to 7.16.0 or later, you must complete several prerequisites before creating a new {sn-itsm} or {sn-sir} connector. For more information, refer to prerequisites for {kibana-ref}/servicenow-action-type.html#servicenow-itsm-connector-prerequisites[{sn-itsm}] and {kibana-ref}/servicenow-sir-action-type.html#servicenow-sir-connector-prerequisites[{sn-sir}].
+
|===

| *{sn} instance URL* | The URL of the {sn} instance to which you want to send cases.

| *Use OAuth authentication* | Enable this to use open authorization (OAuth) to authenticate a connection between Elastic and {sn}.

To use open authorization (OAuth), you must {kibana-ref}/servicenow-action-type.html#servicenow-itsm-connector-prerequisites-rsa-key[create an RSA keypair and add an X.509 Certificate] and also {kibana-ref}/servicenow-action-type.html#servicenow-itsm-connector-prerequisites-endpoint[create an OAuth JWT API endpoint for external clients with a JWT Verifiers Map.]

| *Username* | Displays if *Use OAuth authentication* is turned _off_.

The username of the {sn} account used to access the {sn} instance.

| *Password* | Displays if *Use OAuth authentication* is turned _off_.

The password of the {sn} account used to access the {sn} instance.

| *Client ID* | Displays if *Use OAuth authentication* is turned _on_.

The client ID assigned to your OAuth application.

| *User Identifier* | Displays if *Use OAuth authentication* is turned _on_.

Identifier to use for OAuth type authentication. Use the value you entered into the *User field* when you created an OAuth JWT API endpoint for external clients.

| *JWT Verifier Key ID* | Displays if *Use OAuth authentication* is turned _on_.

The key ID assigned to the JWT Verifier Map of your OAuth application.

| *Client Secret* | Displays if *Use OAuth authentication* is turned _on_.

The client secret assigned to your OAuth application.

| *Private Key* | Displays if *Use OAuth authentication* is turned _on_.

The RSA private key generated when you created an RSA keypair.

| *Private Key Password* | Displays only if *Use OAuth authentication* is turned _on_.

The password for the RSA private key generated during setup, if set.

|===

** For {swimlane} connectors:
+
|===

| *API URL* |  The URL of the {swimlane} instance to which you want to send cases.

| *Application ID* | The application ID of your {swimlane} application. From {swimlane}, you can find the application
ID by checking your application’s settings or at the end of your application’s URL after you’ve opened it.

| *API token* | The {swimlane} API authentication token is used for HTTP Basic authentication.
This is the personal access token for your user role.

| *Connector Type* a| Select a connector type:

* *All*: You can choose to set all or no field mappings when creating your new {swimlane} connector. However, note that if you don’t set field mappings now, you’ll be prompted to do so if you want to use the connector for a case or a rule.
* *Alerts*: Provide an alert ID and rule name.
* *Cases*: Provide a case ID, a case name, comments, and a description.

|===
+


[float]
[[mapped-case-fields]]
=== Mapped case fields

To represent an {es-sec} case in an external system, {es-sec} case fields are mapped to existing fields in {sn}, {jira}, {ibm-r}, and {swimlane}. Once fields are mapped, you can push updates to to external systems, but you cannot pull data in.

|===

| *Case field* | *Mapped field*

| Title

a| The case `Title` field is mapped as follows:

* *{sn}*: Mapped to the `Short description` field.
* *{jira}*: Mapped to the `Summary` field.
* *{ibm-r}*: Mapped to the `Name` field.
* *{swimlane}*: Mapped to the `Description` field.

| Description
| The case `Description` field is mapped to the `Description` field in {sn}, {jira}, {ibm-r}, and {swimlane}.

| Comments

a| The case `Comments` field is mapped to the `Work Notes` field for {sn}.

For {jira}, {ibm-r}, and {swimlane}, the case `Comments` field is mapped to the `Comments` field in {jira}, {ibm-r}, and {swimlane}.

====

*NOTE:* When you push new or updated case comments to {sn}, {jira}, and {ibm-r}, they are added to existing incidents.

In {swimlane} incident records, the field that's mapped to the `Comment` field gets appended. Comments are also posted to the {swimlane} incident record individually.
====

|===

[[close-connector]]
[float]
[[close-sent-cases]]
=== Close sent cases automatically

To close cases when they are sent to an external system, select
*Automatically close Security cases when pushing new incident to external system*.

[[default-connector]]
[float]
[[change-default-connector]]
=== Change the default connector

To change the default connector used to send cases to external systems, go to *Cases* -> *Edit external connection* and select the required connector from the Incident management system list.

[role="screenshot"]
image::images/cases-change-default-connector.png[Shows list of available connectors]

[[add-connector]]
[float]
=== Add connectors

After you <<cases-ui-open, create a case>>, you can add connectors to it. From the case details page, go to *External incident management system*, then select a connector. A case can have multiple connectors, but only one connector can be selected at a time.

[role="screenshot"]
image::images/add-connectors.png[width=60%][height=60%][Shows how to add connectors]


[[modify-connector]]
[float]
[[modify-connector-settings]]
=== Modify connector settings

To change the settings of an existing connector:

. Go to *Investigate* -> *Cases* -> *Edit external connection*.
. Select the required connector from the Incident management system list.
. Click *Update <connector name>*.
. In the *Edit connector* flyout, modify the connector fields as required, then click *Save & close* to save your changes.

[role="screenshot"]
image::images/cases-modify-connector.png[]

[float]
[[connect-security-to-jira]]
=== Tutorial: Connect {elastic-sec} to {jira}

To learn how to connect {elastic-sec} to {jira}, check out the following tutorial.

=======
++++
<script type="text/javascript" async src="https://play.vidyard.com/embed/v4.js"></script>
<img
  style="width: 100%; margin: auto; display: block;"
  class="vidyard-player-embed"
  src="https://play.vidyard.com/keTDcfoWcGsx36DK3yna48.jpg"
  data-uuid="keTDcfoWcGsx36DK3yna48"
  data-v="4"
  data-type="inline"
/>
</br>
++++
=======
