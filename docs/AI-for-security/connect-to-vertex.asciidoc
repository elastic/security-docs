[[connect-to-vertex]]
= Connect to Google Vertex

:frontmatter-description: Set up a Google Vertex LLM connector.
:frontmatter-tags-products: [security]
:frontmatter-tags-content-type: [guide]
:frontmatter-tags-user-goals: [get-started]

This page provides step-by-step instructions for setting up a Google Vertex AI connector for the first time. This connector type enables you to leverage Vertex AI's large language models (LLMs) within {elastic-sec}. You'll first need to enable Vertex AI, then generate an API key, and finally configure the connector in your {elastic-sec} project.

IMPORTANT: Before continuing, you should have an active project in one of Google Vertex AI's https://cloud.google.com/vertex-ai/docs/general/locations#feature-availability[supported regions]. 

[discrete]
== Enable the Vertex AI API

1. Log in to the GCP console and navigate to **Vertex AI → Vertex AI Studio → Overview**. 
2. If you're new to Vertex AI, the **Get started with Vertex AI Studio** popup appears. Click **Vertex AI API**, then click **ENABLE**.

The following video demonstrates these steps.

=======
++++
<script type="text/javascript" async src="https://play.vidyard.com/embed/v4.js"></script>
<img
  style="width: 100%; margin: auto; display: block;"
  class="vidyard-player-embed"
  src="https://play.vidyard.com/vFhtbiCZiKhvdZGy2FjyeT.jpg"
  data-uuid="vFhtbiCZiKhvdZGy2FjyeT"
  data-v="4"
  data-type="inline"
/>
</br>
++++
=======

NOTE: For more information about enabling the Vertex AI API, refer to https://cloud.google.com/vertex-ai/docs/start/cloud-environment[Google's documentation].

[discrete] 
== Create a Vertex AI service account

1. In the GCP console, navigate to **APIs & Services → Library**.
2. Search for **Vertex AI API**, select it, and click **MANAGE**.
3. In the left menu, navigate to **Credentials** then click **+ CREATE CREDENTIALS** and select **Service account**.
4. Name the new service account, then click **CREATE AND CONTINUE**. 
5. Under **Select a role**, select **Vertex AI User**, then click **CONTINUE**.
6. Click **Done**.

The following video demonstrates these steps.

=======
++++
<script type="text/javascript" async src="https://play.vidyard.com/embed/v4.js"></script>
<img
  style="width: 100%; margin: auto; display: block;"
  class="vidyard-player-embed"
  src="https://play.vidyard.com/tmresYYiags2w2nTv3Gac8.jpg"
  data-uuid="tmresYYiags2w2nTv3Gac8"
  data-v="4"
  data-type="inline"
/>
</br>
++++
=======

[discrete] 
== Generate an API key

1. Return to Vertex AI's **Credentials** menu and click **Manage service accounts**.
2. Search for the service account you just created, select it, then click the link that appears under **Email**.
3. Go to the **KEYS** tab, click **ADD KEY**, then select **Create new key**.
4. Select **JSON**, then click **CREATE** to download the key. Keep it somewhere secure.

The following video demonstrates these steps.

=======
++++
<script type="text/javascript" async src="https://play.vidyard.com/embed/v4.js"></script>
<img
  style="width: 100%; margin: auto; display: block;"
  class="vidyard-player-embed"
  src="https://play.vidyard.com/hrcy3F9AodwhJcV1i2yqbG.jpg"
  data-uuid="hrcy3F9AodwhJcV1i2yqbG"
  data-v="4"
  data-type="inline"
/>
</br>
++++
=======

[discrete]
== Configure the Google Gemini connector

Finally, configure the connector in your Elastic deployment:

1. Log in to your Elastic deployment.
2. Navigate to **Stack Management → Connectors → Create Connector → Google Gemini**.
3. Name your connector to help keep track of the model version you are using.
4. Under **URL**, enter the URL for your region.
5. Enter your **GCP Region** and **GCP Project ID**.
6. Under **Default model**, specify either `gemini-1.5.pro` or `gemini-1.5-flash`. https://cloud.google.com/vertex-ai/generative-ai/docs/learn/models[Learn more about the models].
7. Under **Authentication**, enter your API key.
8. Click **Save**.

The following video demonstrates these steps.

=======
++++
<script type="text/javascript" async src="https://play.vidyard.com/embed/v4.js"></script>
<img
  style="width: 100%; margin: auto; display: block;"
  class="vidyard-player-embed"
  src="https://play.vidyard.com/8L2WPm2HKN1cH872Gs5uvL.jpg"
  data-uuid="8L2WPm2HKN1cH872Gs5uvL"
  data-v="4"
  data-type="inline"
/>
</br>
++++
=======
